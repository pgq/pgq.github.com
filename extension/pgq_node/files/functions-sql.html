<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Functions</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Functions"></a>Functions</h1><div class=CBody><p>Database functions for cascaded pgq.</p><h4 class=CHeading>Cascaded consumer flow</h4><ul><li>(1) [target] call pgq_node.get_consumer_state()</li><li>(2) If .paused is true, sleep, go to (1).&nbsp; This is allows to control consumer remotely.</li><li>(3) If .uptodate is false, call pgq_node.set_consumer_uptodate(true).&nbsp; This allows remote controller to know that consumer has seen the changes.</li><li>(4) [source] call pgq.next_batch().&nbsp;  If returns NULL, sleep, goto (1)</li><li>(5) [source] if batch already done, call pgq.finish_batch(), go to (1)</li><li>(6) [source] read events</li><li>(7) [target] process events, call pgq_node.set_consumer_completed() in same tx.</li><li>(8) [source] call pgq.finish_batch()</li></ul><h4 class=CHeading>Cascaded worker flow</h4><p>Worker is consumer that also copies to queue contents to local node (branch), so it can act as provider to other nodes.&nbsp;  There can be only one worker per node.&nbsp;  Or zero if node is leaf.&nbsp;  In addition to cascaded consumer logic above, it must -</p><ul><li>[branch] copy all events to local queue and create ticks</li><li>[merge-leaf] copy all events to combined-queue</li><li>[branch] publish local watermark upwards to provider so it reaches root.</li><li>[branch] apply global watermark event to local node</li><li>[merge-leaf] wait-behind on combined-branch (failover combined-root).&nbsp; It&rsquo;s last_tick_id is set by combined-branch worker, it must call pgq.next_batch()+pgq.finish_batch() without processing events when behind, but not move further.&nbsp;  When the combined-branch becomes root, it will be in right position to continue updating.</li></ul><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription>Database functions for cascaded pgq.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Global_Node_Map" >Global Node Map</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.register_location(4)" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">pgq_node.<wbr>register_location(4)</a></td><td class=SDescription>Add new node location.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.unregister_location(2)" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">pgq_node.<wbr>unregister_location(2)</a></td><td class=SDescription>Drop unreferenced node.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.get_queue_locations(1)" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">pgq_node.<wbr>get_queue_locations(1)</a></td><td class=SDescription>Get node list for the queue.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Node_operations" >Node operations</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.create_node(7)" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">pgq_node.<wbr>create_node(7)</a></td><td class=SDescription>Initialize node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.drop_node(2)" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">pgq_node.<wbr>drop_node(2)</a></td><td class=SDescription>Drop node. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.get_node_info(1)" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">pgq_node.<wbr>get_node_info(1)</a></td><td class=SDescription>Get local node info for cascaded queue.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.is_root_node(1)" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">pgq_node.<wbr>is_root_node(1)</a></td><td class=SDescription>Checs if node is root.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.is_leaf_node(1)" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">pgq_node.<wbr>is_leaf_node(1)</a></td><td class=SDescription>Checs if node is leaf.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.get_subscriber_info(1)" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">pgq_node.<wbr>get_subscriber_info(1)</a></td><td class=SDescription>Get subscriber list for the local node.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.get_consumer_info(1)" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">pgq_node.<wbr>get_consumer_info(1)</a></td><td class=SDescription>Get consumer list that work on the local node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.demote_root(3)" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">pgq_node.<wbr>demote_root(3)</a></td><td class=SDescription>Multi-step root demotion to branch.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.promote_branch(1)" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">pgq_node.<wbr>promote_branch(1)</a></td><td class=SDescription>Promote branch node to root.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.create_attrs(2)" >pgq_node.<wbr>create_attrs(2)</a></td><td class=SDescription>Set node attributes.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Provider_side_operations-worker" >Provider side operations - worker</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.register_subscriber(4)" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">pgq_node.<wbr>register_subscriber(4)</a></td><td class=SDescription>Subscribe remote node to local node at custom position. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.unregister_subscriber(2)" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">pgq_node.<wbr>unregister_subscriber(2)</a></td><td class=SDescription>Unsubscribe remote node from local node.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.set_subscriber_watermark(3)" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">pgq_node.<wbr>set_subscriber_watermark(3)</a></td><td class=SDescription>Notify provider about subscribers lowest watermark.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Subscriber_side_operations-worker" >Subscriber side operations - worker</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.get_worker_state(1)" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">pgq_node.<wbr>get_worker_state(1)</a></td><td class=SDescription>Get info for consumer that maintains local node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.set_global_watermark(2)" id=link17 onMouseOver="ShowTip(event, 'tt17', 'link17')" onMouseOut="HideTip('tt17')">pgq_node.<wbr>set_global_watermark(2)</a></td><td class=SDescription>Move global watermark on branch/leaf, publish on root.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.set_partition_watermark(3)" id=link18 onMouseOver="ShowTip(event, 'tt18', 'link18')" onMouseOut="HideTip('tt18')">pgq_node.<wbr>set_partition_watermark(3)</a></td><td class=SDescription>Move merge-leaf position on combined-branch.</td></tr><tr class="SGroup"><td class=SEntry><a href="#Subscriber_side_operations-any_consumer" >Subscriber side operations - any consumer</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.register_consumer(4)" id=link19 onMouseOver="ShowTip(event, 'tt19', 'link19')" onMouseOut="HideTip('tt19')">pgq_node.<wbr>register_consumer(4)</a></td><td class=SDescription>Subscribe plain cascaded consumer to a target node. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.unregister_consumer(2)" id=link20 onMouseOver="ShowTip(event, 'tt20', 'link20')" onMouseOut="HideTip('tt20')">pgq_node.<wbr>unregister_consumer(2)</a></td><td class=SDescription>Unregister cascaded consumer from local node.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.get_consumer_state(2)" id=link21 onMouseOver="ShowTip(event, 'tt21', 'link21')" onMouseOut="HideTip('tt21')">pgq_node.<wbr>get_consumer_state(2)</a></td><td class=SDescription>Get info for cascaded consumer that targets local node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.change_consumer_provider(3)" id=link22 onMouseOver="ShowTip(event, 'tt22', 'link22')" onMouseOut="HideTip('tt22')">pgq_node.<wbr>change_consumer_provider(3)</a></td><td class=SDescription>Change provider for this consumer.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.set_consumer_uptodate(3)" id=link23 onMouseOver="ShowTip(event, 'tt23', 'link23')" onMouseOut="HideTip('tt23')">pgq_node.<wbr>set_consumer_uptodate(3)</a></td><td class=SDescription>Set consumer uptodate flag.....</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.set_consumer_paused(3)" id=link24 onMouseOver="ShowTip(event, 'tt24', 'link24')" onMouseOut="HideTip('tt24')">pgq_node.<wbr>set_consumer_paused(3)</a></td><td class=SDescription>Set consumer paused flag.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.set_consumer_completed(3)" id=link25 onMouseOver="ShowTip(event, 'tt25', 'link25')" onMouseOut="HideTip('tt25')">pgq_node.<wbr>set_consumer_completed(3)</a></td><td class=SDescription>Set last completed tick id for the cascaded consumer that it has committed to local node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.set_consumer_error(3)" id=link26 onMouseOver="ShowTip(event, 'tt26', 'link26')" onMouseOut="HideTip('tt26')">pgq_node.<wbr>set_consumer_error(3)</a></td><td class=SDescription>If batch processing fails, consumer can store it&rsquo;s last error in db. </td></tr><tr class="SGroup"><td class=SEntry><a href="#Maintenance_operations" >Maintenance operations</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#pgq_node.maint_watermark(1)" id=link27 onMouseOver="ShowTip(event, 'tt27', 'link27')" onMouseOut="HideTip('tt27')">pgq_node.<wbr>maint_watermark(1)</a></td><td class=SDescription>Move global watermark on root node.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#pgq_node.version(0)" id=link28 onMouseOver="ShowTip(event, 'tt28', 'link28')" onMouseOut="HideTip('tt28')">pgq_node.<wbr>version(0)</a></td><td class=SDescription>Returns version string for pgq_node. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Global_Node_Map"></a>Global Node Map</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.register_location(4)"></a>pgq_node.<wbr>register_location(4)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_location(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_dead&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Add new node location.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>node name</td></tr><tr><td class=CDLEntry>i_node_location</td><td class=CDLDescription>node connect string</td></tr><tr><td class=CDLEntry>i_dead</td><td class=CDLDescription>dead flag for node</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>error description</td></tr></table><h4 class=CHeading>Return Codes</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>Ok</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.unregister_location(2)"></a>pgq_node.<wbr>unregister_location(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_location(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Drop unreferenced node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>node to drop</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>error description</td></tr></table><h4 class=CHeading>Return Codes</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>Ok</td></tr><tr><td class=CDLEntry>301</td><td class=CDLDescription>Location not found</td></tr><tr><td class=CDLEntry>403</td><td class=CDLDescription>Cannot drop node&rsquo;s own or parent location</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_queue_locations(1)"></a>pgq_node.<wbr>get_queue_locations(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_queue_locations(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>dead&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get node list for the queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node_name</td><td class=CDLDescription>node name</td></tr><tr><td class=CDLEntry>node_location</td><td class=CDLDescription>libpq connect string for the node</td></tr><tr><td class=CDLEntry>dead</td><td class=CDLDescription>whether the node should be considered dead</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Node_operations"></a>Node operations</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.create_node(7)"></a>pgq_node.<wbr>create_node(7)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.create_node(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_provider_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Initialize node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_node_type</td><td class=CDLDescription>node type</td></tr><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>node name</td></tr><tr><td class=CDLEntry>i_worker_name</td><td class=CDLDescription>worker consumer name</td></tr><tr><td class=CDLEntry>i_provider_name</td><td class=CDLDescription>provider node name for non-root nodes</td></tr><tr><td class=CDLEntry>i_global_watermark</td><td class=CDLDescription>global lowest tick_id</td></tr><tr><td class=CDLEntry>i_combined_queue</td><td class=CDLDescription>merge-leaf: target queue</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>Ok</td></tr><tr><td class=CDLEntry>401</td><td class=CDLDescription>node already initialized</td></tr><tr><td class=CDLEntry>????</td><td class=CDLDescription>maybe we coud use more error codes ?</td></tr></table><h4 class=CHeading>Node Types</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>root</td><td class=CDLDescription>master node</td></tr><tr><td class=CDLEntry>branch</td><td class=CDLDescription>subscriber node that can be provider to others</td></tr><tr><td class=CDLEntry>leaf</td><td class=CDLDescription>subscriber node that cannot be provider to others Calls: None Tables directly manipulated: None</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.drop_node(2)"></a>pgq_node.<wbr>drop_node(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.drop_node(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Drop node.&nbsp; This needs to be run on all the members of a set to properly get rid of the node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>node_name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>error description</td></tr></table><h4 class=CHeading>Return Codes</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>Ok</td></tr><tr><td class=CDLEntry>304</td><td class=CDLDescription>No such queue</td></tr><tr><td class=CDLEntry>406</td><td class=CDLDescription>That is a provider Calls: None Tables directly manipulated: None</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_node_info(1)"></a>pgq_node.<wbr>get_node_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_node_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_attrs&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Get local node info for cascaded queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node_type</td><td class=CDLDescription>local node type</td></tr><tr><td class=CDLEntry>node_name</td><td class=CDLDescription>local node name</td></tr><tr><td class=CDLEntry>global_watermark</td><td class=CDLDescription>queue&rsquo;s global watermark</td></tr><tr><td class=CDLEntry>local_watermark</td><td class=CDLDescription>queue&rsquo;s local watermark, for this and below nodes</td></tr><tr><td class=CDLEntry>provider_node</td><td class=CDLDescription>provider node name</td></tr><tr><td class=CDLEntry>provider_location</td><td class=CDLDescription>provider connect string</td></tr><tr><td class=CDLEntry>combined_queue</td><td class=CDLDescription>queue name for target set</td></tr><tr><td class=CDLEntry>combined_type</td><td class=CDLDescription>node type of target set</td></tr><tr><td class=CDLEntry>worker_name</td><td class=CDLDescription>consumer name that maintains this node</td></tr><tr><td class=CDLEntry>worker_paused</td><td class=CDLDescription>is worker paused</td></tr><tr><td class=CDLEntry>worker_uptodate</td><td class=CDLDescription>is worker seen the changes</td></tr><tr><td class=CDLEntry>worker_last_tick</td><td class=CDLDescription>last committed tick_id by worker</td></tr><tr><td class=CDLEntry>node_attrs</td><td class=CDLDescription>urlencoded dict of random attrs for worker (eg. sync_watermark)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.is_root_node(1)"></a>pgq_node.<wbr>is_root_node(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.is_root_node(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bool</td></tr></table></td></tr></table></blockquote><p>Checs if node is root.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name Returns:</td></tr><tr><td class=CDLEntry>true</td><td class=CDLDescription>if this this the root node for queue</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.is_leaf_node(1)"></a>pgq_node.<wbr>is_leaf_node(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.is_leaf_node(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bool</td></tr></table></td></tr></table></blockquote><p>Checs if node is leaf.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name Returns:</td></tr><tr><td class=CDLEntry>true</td><td class=CDLDescription>if this this the leaf node for queue</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_subscriber_info(1)"></a>pgq_node.<wbr>get_subscriber_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_subscriber_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get subscriber list for the local node.</p><p>It may be out-of-date, due to in-progress administrative change.&nbsp; Node&rsquo;s local provider info ( pgq_node.get_node_info() or pgq_node.get_worker_state(1) ) is the authoritative source.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node_name</td><td class=CDLDescription>node name that uses current node as provider</td></tr><tr><td class=CDLEntry>worker_name</td><td class=CDLDescription>consumer that maintains remote node</td></tr><tr><td class=CDLEntry>local_watermark</td><td class=CDLDescription>lowest tick_id on subscriber</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_consumer_info(1)"></a>pgq_node.<wbr>get_consumer_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get consumer list that work on the local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr><tr><td class=CDLEntry>provider_node</td><td class=CDLDescription>node from where the consumer reads from</td></tr><tr><td class=CDLEntry>last_tick_id</td><td class=CDLDescription>last committed tick</td></tr><tr><td class=CDLEntry>paused</td><td class=CDLDescription>if consumer is paused</td></tr><tr><td class=CDLEntry>uptodate</td><td class=CDLDescription>if consumer is uptodate</td></tr><tr><td class=CDLEntry>cur_error</td><td class=CDLDescription>failure reason</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.demote_root(3)"></a>pgq_node.<wbr>demote_root(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.demote_root(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_step&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_new_provider&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Multi-step root demotion to branch.</p><h4 class=CHeading>Must be be called for each step in sequence</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Step 1</td><td class=CDLDescription>disable writing to queue.</td></tr><tr><td class=CDLEntry>Step 2</td><td class=CDLDescription>wait until writers go away, do tick.</td></tr><tr><td class=CDLEntry>Step 3</td><td class=CDLDescription>change type, register.</td></tr></table><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_step</td><td class=CDLDescription>step number</td></tr><tr><td class=CDLEntry>i_new_provider</td><td class=CDLDescription>new provider node Returns:</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>success</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>node not initialized for queue</td></tr><tr><td class=CDLEntry>301</td><td class=CDLDescription>node is not root</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.promote_branch(1)"></a>pgq_node.<wbr>promote_branch(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.promote_branch(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Promote branch node to root.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>success</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>node not initialized for queue</td></tr><tr><td class=CDLEntry>301</td><td class=CDLDescription>node is not branch</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.create_attrs(2)"></a>pgq_node.<wbr>create_attrs(2)</h3><div class=CBody><p>Set node attributes.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_node_attrs</td><td class=CDLDescription>urlencoded node attrs</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>node not found</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Provider_side_operations-worker"></a>Provider side operations - worker</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.register_subscriber(4)"></a>pgq_node.<wbr>register_subscriber(4)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_subscriber(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_custom_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Subscribe remote node to local node at custom position.&nbsp; Should be used when changing provider for existing node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>set name</td></tr><tr><td class=CDLEntry>i_remote_node_name</td><td class=CDLDescription>node name</td></tr><tr><td class=CDLEntry>i_remote_worker_name</td><td class=CDLDescription>consumer name</td></tr><tr><td class=CDLEntry>i_custom_tick_id</td><td class=CDLDescription>tick id [optional]</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr><tr><td class=CDLEntry>global_watermark</td><td class=CDLDescription>minimal watermark</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.unregister_subscriber(2)"></a>pgq_node.<wbr>unregister_subscriber(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_subscriber(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Unsubscribe remote node from local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>set name</td></tr><tr><td class=CDLEntry>i_remote_node_name</td><td class=CDLDescription>node name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_subscriber_watermark(3)"></a>pgq_node.<wbr>set_subscriber_watermark(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_subscriber_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Notify provider about subscribers lowest watermark.</p><p>Called on provider at interval by each worker</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>subscriber node name</td></tr><tr><td class=CDLEntry>i_watermark</td><td class=CDLDescription>tick_id</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Subscriber_side_operations-worker"></a>Subscriber side operations - worker</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_worker_state(1)"></a>pgq_node.<wbr>get_worker_state(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_worker_state(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>completed_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_queue_top&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Get info for consumer that maintains local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node_type</td><td class=CDLDescription>local node type</td></tr><tr><td class=CDLEntry>node_name</td><td class=CDLDescription>local node name</td></tr><tr><td class=CDLEntry>completed_tick</td><td class=CDLDescription>last committed tick</td></tr><tr><td class=CDLEntry>provider_node</td><td class=CDLDescription>provider node name</td></tr><tr><td class=CDLEntry>provider_location</td><td class=CDLDescription>connect string to provider node</td></tr><tr><td class=CDLEntry>paused</td><td class=CDLDescription>this node should not do any work</td></tr><tr><td class=CDLEntry>uptodate</td><td class=CDLDescription>if consumer has loaded last changes</td></tr><tr><td class=CDLEntry>cur_error</td><td class=CDLDescription>failure reason</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_global_watermark(2)"></a>pgq_node.<wbr>set_global_watermark(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_global_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Move global watermark on branch/leaf, publish on root.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_watermark</td><td class=CDLDescription>global tick_id that is processed everywhere.&nbsp; NULL on root, then local wm is published.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_partition_watermark(3)"></a>pgq_node.<wbr>set_partition_watermark(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_partition_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_combined_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_part_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Move merge-leaf position on combined-branch.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_combined_queue_name</td><td class=CDLDescription>local combined queue name</td></tr><tr><td class=CDLEntry>i_part_queue_name</td><td class=CDLDescription>local part queue name (merge-leaf)</td></tr><tr><td class=CDLEntry>i_watermark</td><td class=CDLDescription>partition tick_id that came inside combined-root batch</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>success</td></tr><tr><td class=CDLEntry>201</td><td class=CDLDescription>no partition queue</td></tr><tr><td class=CDLEntry>401</td><td class=CDLDescription>worker registration not found</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Subscriber_side_operations-any_consumer"></a>Subscriber side operations - any consumer</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.register_consumer(4)"></a>pgq_node.<wbr>register_consumer(4)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_consumer(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_custom_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Subscribe plain cascaded consumer to a target node.&nbsp; That means it&rsquo;s planning to read from remote node and write to local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>set name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr><tr><td class=CDLEntry>i_provider_node</td><td class=CDLDescription>node name</td></tr><tr><td class=CDLEntry>i_custom_tick_id</td><td class=CDLDescription>tick id</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>201</td><td class=CDLDescription>already registered</td></tr><tr><td class=CDLEntry>401</td><td class=CDLDescription>no such queue</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.unregister_consumer(2)"></a>pgq_node.<wbr>unregister_consumer(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_consumer(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Unregister cascaded consumer from local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>no such queue</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.get_consumer_state(2)"></a>pgq_node.<wbr>get_consumer_state(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_consumer_state(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>completed_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Get info for cascaded consumer that targets local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_node_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node_type</td><td class=CDLDescription>local node type</td></tr><tr><td class=CDLEntry>node_name</td><td class=CDLDescription>local node name</td></tr><tr><td class=CDLEntry>completed_tick</td><td class=CDLDescription>last committed tick</td></tr><tr><td class=CDLEntry>provider_node</td><td class=CDLDescription>provider node name</td></tr><tr><td class=CDLEntry>provider_location</td><td class=CDLDescription>connect string to provider node</td></tr><tr><td class=CDLEntry>paused</td><td class=CDLDescription>this node should not do any work</td></tr><tr><td class=CDLEntry>uptodate</td><td class=CDLDescription>if consumer has loaded last changes</td></tr><tr><td class=CDLEntry>cur_error</td><td class=CDLDescription>failure reason</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.change_consumer_provider(3)"></a>pgq_node.<wbr>change_consumer_provider(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.change_consumer_provider(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_new_provider&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Change provider for this consumer.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>consumer name</td></tr><tr><td class=CDLEntry>i_new_provider</td><td class=CDLDescription>node name for new provider Returns:</td></tr><tr><td class=CDLEntry>ret_code</td><td class=CDLDescription>error code</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>no such consumer or new node</td></tr><tr><td class=CDLEntry>ret_note</td><td class=CDLDescription>description</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_consumer_uptodate(3)"></a>pgq_node.<wbr>set_consumer_uptodate(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_uptodate(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote><p>Set consumer uptodate flag.....</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>consumer name</td></tr><tr><td class=CDLEntry>i_uptodate</td><td class=CDLDescription>new flag state</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>consumer not known</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_consumer_paused(3)"></a>pgq_node.<wbr>set_consumer_paused(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_paused(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Set consumer paused flag.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr><tr><td class=CDLEntry>i_paused</td><td class=CDLDescription>new flag state Returns:</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>201</td><td class=CDLDescription>already paused</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>consumer not found</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_consumer_completed(3)"></a>pgq_node.<wbr>set_consumer_completed(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_completed(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Set last completed tick id for the cascaded consumer that it has committed to local node.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>cascaded queue name</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>cascaded consumer name</td></tr><tr><td class=CDLEntry>i_tick_id</td><td class=CDLDescription>tick id Returns:</td></tr><tr><td class=CDLEntry>200</td><td class=CDLDescription>ok</td></tr><tr><td class=CDLEntry>404</td><td class=CDLDescription>consumer not known</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.set_consumer_error(3)"></a>pgq_node.<wbr>set_consumer_error(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_error(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_error_msg&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>If batch processing fails, consumer can store it&rsquo;s last error in db.&nbsp; Returns: 100 - ok 101 - consumer not known</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Maintenance_operations"></a>Maintenance operations</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.maint_watermark(1)"></a>pgq_node.<wbr>maint_watermark(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.maint_watermark(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns int4</td></tr></table></td></tr></table></blockquote><p>Move global watermark on root node.</p><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>tells pgqd to call just once</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq_node.version(0)"></a>pgq_node.<wbr>version(0)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">pgq_node.version() returns text</td></tr></table></blockquote><p>Returns version string for pgq_node.&nbsp;  ATM it is based on SkyTools version and only bumped when database code changes.</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile id=MSelected>Functions</div></div><div class=MEntry><div class=MFile><a href="pgq_node-sql.html">Tables</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/DatabaseTables.html">Database Tables</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="DatabaseTables">Database Tables</option><option value="Functions">Functions</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_location(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_dead&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Add new node location.</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_location(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Drop unreferenced node.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_queue_locations(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>dead&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get node list for the queue.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.create_node(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_provider_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Initialize node.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.drop_node(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Drop node. </div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_node_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_attrs&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Get local node info for cascaded queue.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.is_root_node(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bool</td></tr></table></td></tr></table></blockquote>Checs if node is root.</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.is_leaf_node(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bool</td></tr></table></td></tr></table></blockquote>Checs if node is leaf.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_subscriber_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get subscriber list for the local node.</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get consumer list that work on the local node.</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.demote_root(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_step&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_new_provider&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Multi-step root demotion to branch.</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.promote_branch(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Promote branch node to root.</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_subscriber(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_custom_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Subscribe remote node to local node at custom position. </div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_subscriber(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_remote_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Unsubscribe remote node from local node.</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_subscriber_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Notify provider about subscribers lowest watermark.</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_worker_state(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>completed_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>worker_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>global_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>local_queue_top&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_queue&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>combined_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Get info for consumer that maintains local node.</div></div><div class=CToolTip id="tt17"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_global_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Move global watermark on branch/leaf, publish on root.</div></div><div class=CToolTip id="tt18"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_partition_watermark(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_combined_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_part_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_watermark&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Move merge-leaf position on combined-branch.</div></div><div class=CToolTip id="tt19"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.register_consumer(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_custom_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Subscribe plain cascaded consumer to a target node. </div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.unregister_consumer(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Unregister cascaded consumer from local node.</div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.get_consumer_state(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>node_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>completed_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_node&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>provider_location&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_error&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Get info for cascaded consumer that targets local node.</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.change_consumer_provider(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_new_provider&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Change provider for this consumer.</div></div><div class=CToolTip id="tt23"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_uptodate(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_uptodate&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns record</td></tr></table></td></tr></table></blockquote>Set consumer uptodate flag.....</div></div><div class=CToolTip id="tt24"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_paused(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Set consumer paused flag.</div></div><div class=CToolTip id="tt25"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_completed(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Set last completed tick id for the cascaded consumer that it has committed to local node.</div></div><div class=CToolTip id="tt26"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.set_consumer_error(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_error_msg&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_code&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ret_note&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>If batch processing fails, consumer can store it&rsquo;s last error in db. </div></div><div class=CToolTip id="tt27"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq_node.maint_watermark(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns int4</td></tr></table></td></tr></table></blockquote>Move global watermark on root node.</div></div><div class=CToolTip id="tt28"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">pgq_node.version() returns text</td></tr></table></blockquote>Returns version string for pgq_node. </div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>