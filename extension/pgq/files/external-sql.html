<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Public Functions - PgQ</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Public_Functions"></a>Public Functions</h1><div class=CBody><p>The queue is used by a client in the following steps</p><p>1.&nbsp; Register the client (a queue consumer)</p><p>pgq.register_consumer(queue_name, consumer_id)</p><p>2. run a loop createing, consuming and closing batches</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>2a. pgq.get_batch_events(batch_id int8)</td><td class=CDLDescription>returns an int8 batch handle</td></tr><tr><td class=CDLEntry>2b. pgq.get_batch_events(batch_id int8)</td><td class=CDLDescription>returns a set of events for current batch</td></tr></table><p>the event structure is :(ev_id int8, ev_time timestamptz, ev_txid int8, ev_retry int4, ev_type text, ev_data text, ev_extra1, ev_extra2, ev_extra3, ev_extra4)</p><p>2c. if any of the events need to be tagged as failed, use a the function</p><p>pgq.event_failed(batch_id int8, event_id int8, reason text)</p><p>2d.&nbsp;  if you want the event to be re-inserted in the main queue afrer N seconds, use</p><p>pgq.event_retry(batch_id int8, event_id int8, retry_seconds int4)</p><p>2e.&nbsp; To finish processing and release the batch, use</p><p>pgq.finish_batch(batch_id int8)</p><p>Until this is not done, the consumer will get same batch again.</p><p>After calling finish_batch consumer cannot do any operations with events of that batch.&nbsp;  All operations must be done before.</p><p>-- ----------------------------------------------------------------------</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Public_Functions" >Public Functions</a></td><td class=SDescription>The queue is used by a client in the following steps</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Queue_creation" >Queue creation</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.create_queue(1)" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">pgq.<wbr>create_queue(1)</a></td><td class=SDescription>Creates new queue with given name.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.drop_queue(2)" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">pgq.<wbr>drop_queue(2)</a></td><td class=SDescription>Drop queue and all associated tables.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.drop_queue(1)" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">pgq.<wbr>drop_queue(1)</a></td><td class=SDescription>Drop queue and all associated tables. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.set_queue_config(3)" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">pgq.<wbr>set_queue_config(3)</a></td><td class=SDescription>Set configuration for specified queue.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Event_publishing" >Event publishing</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.insert_event(3)" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">pgq.<wbr>insert_event(3)</a></td><td class=SDescription>Insert a event into queue.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.insert_event(7)" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">pgq.<wbr>insert_event(7)</a></td><td class=SDescription>Insert a event into queue with all the extra fields.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.current_event_table(1)" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">pgq.<wbr>current_event_table(1)</a></td><td class=SDescription>Return active event table for particular queue. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Subscribing_to_queue" >Subscribing to queue</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.register_consumer(2)" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">pgq.<wbr>register_consumer(2)</a></td><td class=SDescription>Subscribe consumer on a queue.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.register_consumer_at(3)" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">pgq.<wbr>register_consumer_at(3)</a></td><td class=SDescription>Extended registration, allows to specify tick_id.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.unregister_consumer(2)" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">pgq.<wbr>unregister_consumer(2)</a></td><td class=SDescription>Unsubscribe consumer from the queue. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Batch_processing" >Batch processing</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.next_batch_info(2)" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">pgq.<wbr>next_batch_info(2)</a></td><td class=SDescription>Makes next block of events active.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.next_batch(2)" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">pgq.<wbr>next_batch(2)</a></td><td class=SDescription>Old function that returns just batch_id.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.next_batch_custom(5)" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">pgq.<wbr>next_batch_custom(5)</a></td><td class=SDescription>Makes next block of events active. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.get_batch_events(1)" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">pgq.<wbr>get_batch_events(1)</a></td><td class=SDescription>Get all events in batch.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.get_batch_cursor(4)" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">pgq.<wbr>get_batch_cursor(4)</a></td><td class=SDescription>Get events in batch using a cursor.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.get_batch_cursor(3)" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">pgq.<wbr>get_batch_cursor(3)</a></td><td class=SDescription>Get events in batch using a cursor.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.event_retry(3a)" id=link17 onMouseOver="ShowTip(event, 'tt17', 'link17')" onMouseOut="HideTip('tt17')">pgq.<wbr>event_retry(3a)</a></td><td class=SDescription>Put the event into retry queue, to be processed again later.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.event_retry(3b)" id=link18 onMouseOver="ShowTip(event, 'tt18', 'link18')" onMouseOut="HideTip('tt18')">pgq.<wbr>event_retry(3b)</a></td><td class=SDescription>Put the event into retry queue, to be processed later again.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.batch_retry(2)" id=link19 onMouseOver="ShowTip(event, 'tt19', 'link19')" onMouseOut="HideTip('tt19')">pgq.<wbr>batch_retry(2)</a></td><td class=SDescription>Put whole batch into retry queue, to be processed again later.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.finish_batch(1)" id=link20 onMouseOver="ShowTip(event, 'tt20', 'link20')" onMouseOut="HideTip('tt20')">pgq.<wbr>finish_batch(1)</a></td><td class=SDescription>Closes a batch. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#General_info_functions" >General info functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.get_queue_info(0)" id=link21 onMouseOver="ShowTip(event, 'tt21', 'link21')" onMouseOut="HideTip('tt21')">pgq.<wbr>get_queue_info(0)</a></td><td class=SDescription>Get info about all queues.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.get_queue_info(1)" id=link22 onMouseOver="ShowTip(event, 'tt22', 'link22')" onMouseOut="HideTip('tt22')">pgq.<wbr>get_queue_info(1)</a></td><td class=SDescription>Get info about particular queue.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.get_consumer_info(0)" id=link23 onMouseOver="ShowTip(event, 'tt23', 'link23')" onMouseOut="HideTip('tt23')">pgq.<wbr>get_consumer_info(0)</a></td><td class=SDescription>Returns info about all consumers on all queues.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.get_consumer_info(1)" id=link24 onMouseOver="ShowTip(event, 'tt24', 'link24')" onMouseOut="HideTip('tt24')">pgq.<wbr>get_consumer_info(1)</a></td><td class=SDescription>Returns info about all consumers on single queue.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.get_consumer_info(2)" id=link25 onMouseOver="ShowTip(event, 'tt25', 'link25')" onMouseOut="HideTip('tt25')">pgq.<wbr>get_consumer_info(2)</a></td><td class=SDescription>Get info about particular consumer on particular queue.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#pgq.version(0)" id=link26 onMouseOver="ShowTip(event, 'tt26', 'link26')" onMouseOut="HideTip('tt26')">pgq.<wbr>version(0)</a></td><td class=SDescription>Returns version string for pgq. </td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#pgq.get_batch_info(1)" id=link27 onMouseOver="ShowTip(event, 'tt27', 'link27')" onMouseOut="HideTip('tt27')">pgq.<wbr>get_batch_info(1)</a></td><td class=SDescription>Returns detailed info about a batch.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Queue_creation"></a>Queue creation</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.create_queue(1)"></a>pgq.<wbr>create_queue(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.create_queue(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Creates new queue with given name.</p><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>queue already exists</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>queue created Calls: pgq.grant_perms(i_queue_name); pgq.ticker(i_queue_name); pgq.tune_storage(i_queue_name); Tables directly manipulated:</td></tr><tr><td class=CDLEntry>insert</td><td class=CDLDescription>pgq.queue</td></tr><tr><td class=CDLEntry>create</td><td class=CDLDescription>pgq.event_N () inherits (pgq.event_template)</td></tr><tr><td class=CDLEntry>create</td><td class=CDLDescription>pgq.event_N_0 .. pgq.event_N_M () inherits (pgq.event_N)</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.drop_queue(2)"></a>pgq.<wbr>drop_queue(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.drop_queue(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_force&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Drop queue and all associated tables.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>queue name</td></tr><tr><td class=CDLEntry>x_force</td><td class=CDLDescription>ignore (drop) existing consumers Returns:</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>success Calls: pgq.unregister_consumer(queue_name, consumer_name) perform pgq.ticker(i_queue_name); perform pgq.tune_storage(i_queue_name); Tables directly manipulated:</td></tr><tr><td class=CDLEntry>delete</td><td class=CDLDescription>pgq.queue</td></tr><tr><td class=CDLEntry>drop</td><td class=CDLDescription>pgq.event_N (), pgq.event_N_0 .. pgq.event_N_M</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.drop_queue(1)"></a>pgq.<wbr>drop_queue(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.drop_queue(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Drop queue and all associated tables.&nbsp; No consumers must be listening on the queue.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.set_queue_config(3)"></a>pgq.<wbr>set_queue_config(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.set_queue_config(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_param_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_param_value&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Set configuration for specified queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>Name of the queue to configure.</td></tr><tr><td class=CDLEntry>x_param_name</td><td class=CDLDescription>Configuration parameter name.</td></tr><tr><td class=CDLEntry>x_param_value</td><td class=CDLDescription>Configuration parameter value.</td></tr></table><h4 class=CHeading>Returns</h4><p>0 if event was already in queue, 1 otherwise.&nbsp; Calls: None Tables directly manipulated: update - pgq.queue</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Event_publishing"></a>Event publishing</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.insert_event(3)"></a>pgq.<wbr>insert_event(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.insert_event(</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bigint</td></tr></table></td></tr></table></blockquote><p>Insert a event into queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>ev_type</td><td class=CDLDescription>User-specified type for the event</td></tr><tr><td class=CDLEntry>ev_data</td><td class=CDLDescription>User data for the event</td></tr></table><h4 class=CHeading>Returns</h4><p>Event ID Calls: pgq.insert_event(7)</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.insert_event(7)"></a>pgq.<wbr>insert_event(7)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.insert_event(</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bigint</td></tr></table></td></tr></table></blockquote><p>Insert a event into queue with all the extra fields.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>ev_type</td><td class=CDLDescription>User-specified type for the event</td></tr><tr><td class=CDLEntry>ev_data</td><td class=CDLDescription>User data for the event</td></tr><tr><td class=CDLEntry>ev_extra1</td><td class=CDLDescription>Extra data field for the event</td></tr><tr><td class=CDLEntry>ev_extra2</td><td class=CDLDescription>Extra data field for the event</td></tr><tr><td class=CDLEntry>ev_extra3</td><td class=CDLDescription>Extra data field for the event</td></tr><tr><td class=CDLEntry>ev_extra4</td><td class=CDLDescription>Extra data field for the event</td></tr></table><h4 class=CHeading>Returns</h4><p>Event ID Calls: pgq.insert_event_raw(11) Tables directly manipulated: insert - pgq.insert_event_raw(11), a C function, inserts into current event_N_M table</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.current_event_table(1)"></a>pgq.<wbr>current_event_table(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.current_event_table(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns text</td></tr></table></td></tr></table></blockquote><p>Return active event table for particular queue.&nbsp; Event can be added to it without going via functions, e.g. by COPY.</p><p>If queue is disabled and GUC session_replication_role &lt;&gt; &lsquo;replica&rsquo; then raises exception.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>or expressed in a different way</td><td class=CDLDescription>an even table of a disabled queue is returned only on replica</td></tr></table><h4 class=CHeading>Note</h4><p>The result is valid only during current transaction.</p><h4 class=CHeading>Permissions</h4><p>Actual insertion requires superuser access.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>Queue name.</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Subscribing_to_queue"></a>Subscribing to queue</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.register_consumer(2)"></a>pgq.<wbr>register_consumer(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.register_consumer(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Subscribe consumer on a queue.</p><p>From this moment forward, consumer will see all events in the queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>Name of queue</td></tr><tr><td class=CDLEntry>x_consumer_name</td><td class=CDLDescription>Name of consumer</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>0</td><td class=CDLDescription>if already registered</td></tr><tr><td class=CDLEntry>1</td><td class=CDLDescription>if new registration Calls: pgq.register_consumer_at(3) Tables directly manipulated: None</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.register_consumer_at(3)"></a>pgq.<wbr>register_consumer_at(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.register_consumer_at(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_tick_pos&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Extended registration, allows to specify tick_id.</p><h4 class=CHeading>Note</h4><p>For usage in special situations.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>Name of a queue</td></tr><tr><td class=CDLEntry>x_consumer_name</td><td class=CDLDescription>Name of consumer</td></tr><tr><td class=CDLEntry>x_tick_pos</td><td class=CDLDescription>Tick ID</td></tr></table><h4 class=CHeading>Returns</h4><p>0/1 whether consumer has already registered.&nbsp; Calls: None Tables directly manipulated: update/insert - pgq.subscription</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.unregister_consumer(2)"></a>pgq.<wbr>unregister_consumer(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.unregister_consumer(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Unsubscribe consumer from the queue.&nbsp; Also consumer&rsquo;s retry events are deleted.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>x_consumer_name</td><td class=CDLDescription>Name of the consumer</td></tr></table><h4 class=CHeading>Returns</h4><p>number of (sub)consumers unregistered Calls: None Tables directly manipulated: delete - pgq.retry_queue delete - pgq.subscription</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Batch_processing"></a>Batch processing</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.next_batch_info(2)"></a>pgq.<wbr>next_batch_info(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Makes next block of events active.</p><p>If it returns NULL, there is no events available in queue.&nbsp; Consumer should sleep then.</p><p>The values from event_id sequence may give hint how big the batch may be.&nbsp;  But they are inexact, they do not give exact size.&nbsp; Client <b>MUST NOT</b> use them to detect whether the batch contains any events at all - the values are unfit for that purpose.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>Name of the consumer</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>batch_id</td><td class=CDLDescription>Batch ID or NULL if there are no more events available.</td></tr><tr><td class=CDLEntry>cur_tick_id</td><td class=CDLDescription>End tick id.</td></tr><tr><td class=CDLEntry>cur_tick_time</td><td class=CDLDescription>End tick time.</td></tr><tr><td class=CDLEntry>cur_tick_event_seq</td><td class=CDLDescription>Value from event id sequence at the time tick was issued.</td></tr><tr><td class=CDLEntry>prev_tick_id</td><td class=CDLDescription>Start tick id.</td></tr><tr><td class=CDLEntry>prev_tick_time</td><td class=CDLDescription>Start tick time.</td></tr><tr><td class=CDLEntry>prev_tick_event_seq</td><td class=CDLDescription>value from event id sequence at the time tick was issued.&nbsp; Calls: pgq.next_batch_custom(5) Tables directly manipulated: None</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.next_batch(2)"></a>pgq.<wbr>next_batch(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns int8</td></tr></table></td></tr></table></blockquote><p>Old function that returns just batch_id.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>Name of the consumer</td></tr></table><h4 class=CHeading>Returns</h4><p>Batch ID or NULL if there are no more events available.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.next_batch_custom(5)"></a>pgq.<wbr>next_batch_custom(5)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch_custom(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_interval&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Makes next block of events active.&nbsp;  Block size can be tuned with i_min_count, i_min_interval parameters.&nbsp;  Events age can be tuned with i_min_lag.</p><p>If it returns NULL, there is no events available in queue.&nbsp; Consumer should sleep then.</p><p>The values from event_id sequence may give hint how big the batch may be.&nbsp;  But they are inexact, they do not give exact size.&nbsp; Client <b>MUST NOT</b> use them to detect whether the batch contains any events at all - the values are unfit for that purpose.</p><h4 class=CHeading>Note</h4><p>i_min_lag together with i_min_interval/i_min_count is inefficient.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>Name of the queue</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>Name of the consumer</td></tr><tr><td class=CDLEntry>i_min_lag</td><td class=CDLDescription>Consumer wants events older than that</td></tr><tr><td class=CDLEntry>i_min_count</td><td class=CDLDescription>Consumer wants batch to contain at least this many events</td></tr><tr><td class=CDLEntry>i_min_interval</td><td class=CDLDescription>Consumer wants batch to cover at least this much time</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>batch_id</td><td class=CDLDescription>Batch ID or NULL if there are no more events available.</td></tr><tr><td class=CDLEntry>cur_tick_id</td><td class=CDLDescription>End tick id.</td></tr><tr><td class=CDLEntry>cur_tick_time</td><td class=CDLDescription>End tick time.</td></tr><tr><td class=CDLEntry>cur_tick_event_seq</td><td class=CDLDescription>Value from event id sequence at the time tick was issued.</td></tr><tr><td class=CDLEntry>prev_tick_id</td><td class=CDLDescription>Start tick id.</td></tr><tr><td class=CDLEntry>prev_tick_time</td><td class=CDLDescription>Start tick time.</td></tr><tr><td class=CDLEntry>prev_tick_event_seq</td><td class=CDLDescription>value from event id sequence at the time tick was issued.&nbsp; Calls: pgq.insert_event_raw(11) Tables directly manipulated:</td></tr><tr><td class=CDLEntry>update</td><td class=CDLDescription>pgq.subscription</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_batch_events(1)"></a>pgq.<wbr>get_batch_events(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_events(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get all events in batch.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr></table><h4 class=CHeading>Returns</h4><p>List of events.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_batch_cursor(4)"></a>pgq.<wbr>get_batch_cursor(4)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_cursor(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_cursor_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_quick_limit&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_extra_where&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get events in batch using a cursor.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr><tr><td class=CDLEntry>i_cursor_name</td><td class=CDLDescription>Name for new cursor</td></tr><tr><td class=CDLEntry>i_quick_limit</td><td class=CDLDescription>Number of events to return immediately</td></tr><tr><td class=CDLEntry>i_extra_where</td><td class=CDLDescription>optional where clause to filter events</td></tr></table><h4 class=CHeading>Returns</h4><p>List of events.&nbsp; Calls: pgq.batch_event_sql(i_batch_id) - internal function which generates SQL optimised specially for getting events in this batch</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_batch_cursor(3)"></a>pgq.<wbr>get_batch_cursor(3)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_cursor(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_cursor_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_quick_limit&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get events in batch using a cursor.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr><tr><td class=CDLEntry>i_cursor_name</td><td class=CDLDescription>Name for new cursor</td></tr><tr><td class=CDLEntry>i_quick_limit</td><td class=CDLDescription>Number of events to return immediately</td></tr></table><h4 class=CHeading>Returns</h4><p>List of events.&nbsp; Calls: pgq.get_batch_cursor(4)</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.event_retry(3a)"></a>pgq.<wbr>event_retry(3a)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.event_retry(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_event_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_retry_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Put the event into retry queue, to be processed again later.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr><tr><td class=CDLEntry>x_event_id</td><td class=CDLDescription>event id</td></tr><tr><td class=CDLEntry>x_retry_time</td><td class=CDLDescription>Time when the event should be put back into queue</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>1</td><td class=CDLDescription>success</td></tr><tr><td class=CDLEntry>0</td><td class=CDLDescription>event already in retry queue Calls: None Tables directly manipulated:</td></tr><tr><td class=CDLEntry>insert</td><td class=CDLDescription>pgq.retry_queue</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.event_retry(3b)"></a>pgq.<wbr>event_retry(3b)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.event_retry(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_event_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_retry_seconds&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Put the event into retry queue, to be processed later again.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr><tr><td class=CDLEntry>x_event_id</td><td class=CDLDescription>event id</td></tr><tr><td class=CDLEntry>x_retry_seconds</td><td class=CDLDescription>Time when the event should be put back into queue</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>1</td><td class=CDLDescription>success</td></tr><tr><td class=CDLEntry>0</td><td class=CDLDescription>event already in retry queue Calls: pgq.event_retry(3a) Tables directly manipulated: None</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.batch_retry(2)"></a>pgq.<wbr>batch_retry(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.batch_retry(</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>i_retry_seconds&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Put whole batch into retry queue, to be processed again later.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_batch_id</td><td class=CDLDescription>ID of active batch.</td></tr><tr><td class=CDLEntry>i_retry_time</td><td class=CDLDescription>Time when the event should be put back into queue</td></tr></table><h4 class=CHeading>Returns</h4><p>number of events inserted Calls: None Tables directly manipulated: pgq.retry_queue</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.finish_batch(1)"></a>pgq.<wbr>finish_batch(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.finish_batch(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote><p>Closes a batch.&nbsp;  No more operations can be done with events of this batch.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_batch_id</td><td class=CDLDescription>id of batch.</td></tr></table><h4 class=CHeading>Returns</h4><p>1 if batch was found, 0 otherwise.&nbsp; Calls: None Tables directly manipulated: update - pgq.subscription</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="General_info_functions"></a>General info functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_queue_info(0)"></a>pgq.<wbr>get_queue_info(0)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_queue_info(</td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ntables&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_cur_table&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_rotation_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_switch_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_external_ticker&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_idle_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ticker_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_per_sec&nbsp;</td><td class="PParameter  prettyprint " nowrap>float8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_new&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get info about all queues.</p><h4 class=CHeading>Returns</h4><p>List of pgq.ret_queue_info records. queue_name                  - queue name queue_ntables               - number of tables in this queue queue_cur_table             - ??? queue_rotation_period       - how often the event_N_M tables in this queue are rotated queue_switch_time           - ??? when was this queue last rotated queue_external_ticker       - ??? queue_ticker_paused         - ??? is ticker paused in this queue queue_ticker_max_count      - max number of events before a tick is issued queue_ticker_max_lag        - maks time without a tick queue_ticker_idle_period    - how often the ticker should check this queue ticker_lag                  - time from last tick ev_per_sec                  - how many events per second this queue serves ev_new                      - ??? last_tick_id                - last tick id for this queue</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_queue_info(1)"></a>pgq.<wbr>get_queue_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_queue_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ntables&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_cur_table&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_rotation_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_switch_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_external_ticker&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_idle_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ticker_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_per_sec&nbsp;</td><td class="PParameter  prettyprint " nowrap>float8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_new&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get info about particular queue.</p><h4 class=CHeading>Returns</h4><p>One pgq.ret_queue_info record. contente same as forpgq.get_queue_info()</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_consumer_info(0)"></a>pgq.<wbr>get_consumer_info(0)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Returns info about all consumers on all queues.</p><h4 class=CHeading>Returns</h4><p>See pgq.get_consumer_info(2)</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_consumer_info(1)"></a>pgq.<wbr>get_consumer_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Returns info about all consumers on single queue.</p><h4 class=CHeading>Returns</h4><p>See pgq.get_consumer_info(2)</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_consumer_info(2)"></a>pgq.<wbr>get_consumer_info(2)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote><p>Get info about particular consumer on particular queue.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>i_queue_name</td><td class=CDLDescription>name of a queue.&nbsp; (null = all)</td></tr><tr><td class=CDLEntry>i_consumer_name</td><td class=CDLDescription>name of a consumer (null = all)</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>queue_name</td><td class=CDLDescription>Queue name</td></tr><tr><td class=CDLEntry>consumer_name</td><td class=CDLDescription>Consumer name</td></tr><tr><td class=CDLEntry>lag</td><td class=CDLDescription>How old are events the consumer is processing</td></tr><tr><td class=CDLEntry>last_seen</td><td class=CDLDescription>When the consumer seen by pgq</td></tr><tr><td class=CDLEntry>last_tick</td><td class=CDLDescription>Tick ID of last processed tick</td></tr><tr><td class=CDLEntry>current_batch</td><td class=CDLDescription>Current batch ID, if one is active or NULL</td></tr><tr><td class=CDLEntry>next_tick</td><td class=CDLDescription>If batch is active, then its final tick.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.version(0)"></a>pgq.<wbr>version(0)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">pgq.version() returns text</td></tr></table></blockquote><p>Returns version string for pgq.&nbsp;  ATM it is based on SkyTools version and only bumped when database code changes.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="pgq.get_batch_info(1)"></a>pgq.<wbr>get_batch_info(1)</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_start&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_end&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>seq_start&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>seq_end&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote><p>Returns detailed info about a batch.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>x_batch_id</td><td class=CDLDescription>id of a active batch.</td></tr></table><p>Returns: ??? pls check queue_name      - which queue this batch came from consumer_name   - batch processed by batch_start     - start time of batch batch_end       - end time of batch prev_tick_id    - start tick for this batch tick_id         - end tick for this batch lag             - now() - tick_id.time seq_start       - start event id for batch seq_end         - end event id for batch</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>PgQ<div class=MSubTitle>Database API</div></div><div class=MEntry><div class=MFile id=MSelected>Public Functions</div></div><div class=MEntry><div class=MFile><a href="triggers-sql.html">Public Triggers</a></div></div><div class=MEntry><div class=MFile><a href="internal-sql.html">Internal Functions</a></div></div><div class=MEntry><div class=MFile><a href="schema-sql.html">Internal Tables</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/DatabaseTables.html">Database Tables</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="DatabaseTables">Database Tables</option><option value="Functions">Functions</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.create_queue(</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Creates new queue with given name.</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.drop_queue(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_force&nbsp;</td><td class="PParameter  prettyprint " nowrap>bool</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Drop queue and all associated tables.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.drop_queue(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Drop queue and all associated tables. </div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.set_queue_config(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_param_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_param_value&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Set configuration for specified queue.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.insert_event(</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bigint</td></tr></table></td></tr></table></blockquote>Insert a event into queue.</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.insert_event(</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns bigint</td></tr></table></td></tr></table></blockquote>Insert a event into queue with all the extra fields.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.current_event_table(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns text</td></tr></table></td></tr></table></blockquote>Return active event table for particular queue. </div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.register_consumer(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Subscribe consumer on a queue.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.register_consumer_at(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_tick_pos&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Extended registration, allows to specify tick_id.</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.unregister_consumer(</td><td class="PType  prettyprint " nowrap>x_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Unsubscribe consumer from the queue. </div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Makes next block of events active.</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns int8</td></tr></table></td></tr></table></blockquote>Old function that returns just batch_id.</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.next_batch_custom(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_min_interval&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>cur_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_event_seq&nbsp;</td><td class="PParameter  prettyprint " nowrap>int8</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Makes next block of events active. </div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_events(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get all events in batch.</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_cursor(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_cursor_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_quick_limit&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_extra_where&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get events in batch using a cursor.</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_cursor(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_cursor_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_quick_limit&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_txid&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_retry&nbsp;</td><td class="PParameter  prettyprint " nowrap>int4,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_type&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_data&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra1&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra2&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra3&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_extra4&nbsp;</td><td class="PParameter  prettyprint " nowrap>text</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get events in batch using a cursor.</div></div><div class=CToolTip id="tt17"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.event_retry(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_event_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_retry_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Put the event into retry queue, to be processed again later.</div></div><div class=CToolTip id="tt18"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.event_retry(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_event_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>x_retry_seconds&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Put the event into retry queue, to be processed later again.</div></div><div class=CToolTip id="tt19"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.batch_retry(</td><td class="PType  prettyprint " nowrap>i_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>i_retry_seconds&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Put whole batch into retry queue, to be processed again later.</div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.finish_batch(</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns integer</td></tr></table></td></tr></table></blockquote>Closes a batch. </div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_queue_info(</td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ntables&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_cur_table&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_rotation_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_switch_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_external_ticker&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_idle_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ticker_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_per_sec&nbsp;</td><td class="PParameter  prettyprint " nowrap>float8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_new&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get info about all queues.</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_queue_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ntables&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_cur_table&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_rotation_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_switch_time&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_external_ticker&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_paused&nbsp;</td><td class="PParameter  prettyprint " nowrap>boolean,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_count&nbsp;</td><td class="PParameter  prettyprint " nowrap>integer,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_max_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_ticker_idle_period&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ticker_lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_per_sec&nbsp;</td><td class="PParameter  prettyprint " nowrap>float8,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>ev_new&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get info about particular queue.</div></div><div class=CToolTip id="tt23"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Returns info about all consumers on all queues.</div></div><div class=CToolTip id="tt24"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Returns info about all consumers on single queue.</div></div><div class=CToolTip id="tt25"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_consumer_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>i_consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_seen&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>last_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>current_batch&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>next_tick&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>pending_events&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) returns setof record</td></tr></table></td></tr></table></blockquote>Get info about particular consumer on particular queue.</div></div><div class=CToolTip id="tt26"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">pgq.version() returns text</td></tr></table></blockquote>Returns version string for pgq. </div></div><div class=CToolTip id="tt27"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>pgq.get_batch_info(</td><td class="PTypePrefix  prettyprint " nowrap>in&nbsp;</td><td class="PType  prettyprint " nowrap>x_batch_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>queue_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>consumer_name&nbsp;</td><td class="PParameter  prettyprint " nowrap>text,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_start&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>batch_end&nbsp;</td><td class="PParameter  prettyprint " nowrap>timestamptz,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>prev_tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>tick_id&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>lag&nbsp;</td><td class="PParameter  prettyprint " nowrap>interval,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>seq_start&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>out&nbsp;</td><td class="PType  prettyprint " nowrap>seq_end&nbsp;</td><td class="PParameter  prettyprint " nowrap>bigint</td><td class="PAfterParameters  prettyprint "nowrap>) as</td></tr></table></td></tr></table></blockquote>Returns detailed info about a batch.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>